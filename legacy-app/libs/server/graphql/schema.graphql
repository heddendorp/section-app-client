### This file was generated by Nexus Schema
### Do not make changes to this file directly

type ActivityLog {
  createdAt: DateTime!
  data: Json
  id: ID!
  involvedUser: String
  message: String!
  oldData: Json
  severity: LogSeverity!
}

type ActivityLogStat {
  count: Int!
  message: String!
}

"""
The `BigInt` scalar type represents non-fractional signed whole numeric values.
@see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt
"""
scalar BigInt

"""
The `Byte` scalar type represents byte value as a Buffer
"""
scalar Bytes

type CostItem {
  actualAmount: Decimal
  amount: Decimal!
  calculationInfo: String!
  confirmed: Boolean!
  createdAt: DateTime!
  details: String
  event: TumiEvent!
  eventId: String!
  id: ID!
  moneySent: Boolean!
  moneySentTo: String
  name: String!
  onInvoice: Boolean!
  receipts: [Receipt!]!
  submittedAmount: Decimal!
}

"""
Additional inputs to create an event from a template
"""
input CreateEventFromTemplateInput {
  end: DateTime!
  organizerId: ID!
  organizerLimit: Int!
  participantLimit: Int!
  price: Int
  registrationLink: String
  registrationMode: RegistrationMode!
  start: DateTime!
}

"""
Input needed to create a new event template
"""
input CreateEventTemplateInput {
  comment: String!
  coordinates: Json
  description: String!
  duration: Decimal!
  icon: String!
  location: String!
  organizerText: String!
  participantText: String!
  title: String!
}

input CreatePhotoShareInput {
  cols: Int!
  container: String!
  originalBlob: String!
  rows: Int!
  type: String!
}

input CreateProductImageInput {
  container: String!
  originalBlob: String!
  type: String!
}

input CreateReceiptInput {
  amount: Decimal!
  blob: String!
  container: String!
  md5: String
  type: String
}

input CreateSubmissionItemInput {
  instruction: String!
  name: String!
  required: Boolean!
  submissionTime: SubmissionTime!
  type: SubmissionItemType!
}

"""
New user input object
"""
input CreateUserInput {
  birthdate: DateTime!
  firstName: String!
  lastName: String!
}

"""
A date-time string at UTC, such as 2007-12-03T10:15:30Z, compliant with the `date-time` format outlined in section 5.6 of the RFC 3339 profile of the ISO 8601 standard for representation of dates and times using the Gregorian calendar.
"""
scalar DateTime

"""
An arbitrary-precision Decimal type
"""
scalar Decimal

type EventOrganizer {
  createdAt: DateTime!
  events: [TumiEvent!]!
  id: ID!
  link: String
  name: String!
  tenant: Tenant!
  tenantId: String!
  text: String!
}

type EventRegistration {
  belongsToCurrentUser: Boolean!
  cancellationReason: String
  checkInTime: DateTime
  createdAt: DateTime!
  creatingCode: EventRegistrationCode
  deletingCode: EventRegistrationCode
  didAttend: Boolean!
  event: TumiEvent!
  eventId: String!
  id: ID!
  manualCheckin: Boolean!
  payment: StripePayment
  paymentId: String
  status: RegistrationStatus!
  submissions: [EventSubmission!]!
  type: RegistrationType!
  user: User!
  userId: String!
}

type EventRegistrationCode {
  connectedRegistrations: [EventRegistration!]!
  createdAt: DateTime!
  createdById: String!
  creator: User!
  eventId: String!
  id: ID!
  isPublic: Boolean!
  registrationCreated: EventRegistration
  registrationCreatedId: String
  registrationToRemove: EventRegistration
  registrationToRemoveId: String
  sepaAllowed: Boolean!
  status: RegistrationStatus!
  targetEvent: TumiEvent!
}

type EventSubmission {
  createdAt: DateTime!
  data: Json!
  eventRegistrationId: String!
  id: ID!
  registration: EventRegistration!
  submissionItem: EventSubmissionItem!
  submissionItemId: String!
}

type EventSubmissionItem {
  createdAt: DateTime!
  event: TumiEvent!
  eventId: String!
  id: ID!
  instruction: String!
  name: String!
  ownSubmissions: [EventSubmission!]!
  required: Boolean!
  submissionTime: SubmissionTime!
  submissions: [EventSubmission!]!
  type: SubmissionItemType!
}

"""
Template that holds all information for an event that is needed to run it
"""
type EventTemplate {
  comment: String!
  coordinates: Json
  createdAt: DateTime!
  description: String!
  duration: Decimal!
  eventInstances: [TumiEvent!]!
  finances: Json!
  icon: String!
  id: ID!
  location: String!
  organizerText: String!
  participantText: String!
  tenant: Tenant!
  title: String!
}

type EventTemplateCategory {
  createdAt: DateTime!
  icon: String!
  id: ID!
  name: String!
  templates: [EventTemplate!]!
}

"""
The `JSONObject` scalar type represents JSON objects as specified by [ECMA-404](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf).
"""
scalar Json
  @specifiedBy(
    url: "http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf"
  )

enum LogSeverity {
  DEBUG
  ERROR
  INFO
  SILLY
  WARNING
}

enum MembershipStatus {
  ALUMNI
  FULL
  NONE
  SPONSOR
  TRIAL
}

type Mutation {
  """
  Adds the user with the supplied id to the event
  """
  addOrganizerToEvent(eventId: ID!, userId: ID!): TumiEvent
  addReceiptToCostItem(
    costItemId: ID!
    receiptInput: CreateReceiptInput!
  ): CostItem

  """
  Change the publication state of an event
  """
  changeEventPublication(id: ID!, state: PublicationState!): TumiEvent
  checkInUser(id: ID!, manualCheckin: Boolean = false): EventRegistration

  """
  Creates a new event from a given Template
  """
  createEventFromTemplate(
    createEventFromTemplateInput: CreateEventFromTemplateInput!
    templateId: ID!
  ): TumiEvent

  """
  Create a new event organizer
  """
  createEventOrganizer(newOrganizerInput: NewOrganizerInput!): EventOrganizer
  createEventTemplate(
    eventTemplateInput: CreateEventTemplateInput!
  ): EventTemplate
  createPhotoShare(data: CreatePhotoShareInput!, eventId: ID!): PhotoShare
  createProduct: Product!
  createProductImage(
    data: CreateProductImageInput!
    productId: ID!
  ): ProductImage
  createRegistrationCode(
    eventId: ID!
    isPublic: Boolean = false
    registrationId: ID
    sepaAllowed: Boolean = false
  ): EventRegistrationCode!
  createSubmissionOnEvent(
    data: CreateSubmissionItemInput!

    """
    ID of the targeted event
    """
    id: ID!
  ): TumiEvent!
  deleteCostItem(id: ID!): TumiEvent
  deleteReceipt(costItemId: ID!, receiptId: ID!): CostItem!

  """
  Delete one template by id
  """
  deleteTemplate(id: ID!): EventTemplate
  deregisterFromEvent(
    registrationId: ID!
    withRefund: Boolean = true
  ): TumiEvent
  registerForEvent(
    eventId: ID!
    price: Json
    registrationType: RegistrationType = PARTICIPANT
    submissions: Json
  ): TumiEvent!

  """
  Add a new user to the database
  """
  registerUser(userInput: CreateUserInput): User!
  updateCostItemsFromTemplate(eventId: ID!): TumiEvent
  updateESNcard(esnCardOverride: Boolean!, id: ID!): User
  updateEventCoreInfo(data: UpdateCoreEventInput!, id: ID!): TumiEvent!
  updateEventGeneralInfo(data: UpdateGeneralEventInput!, id: ID!): TumiEvent!

  """
  Update an event template
  """
  updateEventLocation(data: UpdateLocationInput!, id: ID!): TumiEvent
  updateProduct(data: UpdateProductInput!, id: ID!): Product!
  updateProfile(input: UpdateProfileInput!): User

  """
  Update an event template
  """
  updateTemplate(data: UpdateTemplateInput!, id: ID!): EventTemplate
  updateTemplateFinances(finances: Json!, id: ID!): EventTemplate!

  """
  Update an event template
  """
  updateTemplateLocation(data: UpdateLocationInput!, id: ID!): EventTemplate
  updateTenant(data: updateTenantInput!, id: ID!): Tenant

  """
  Change the role of s user on the current tenant
  """
  updateUserRole(role: Role!, userId: ID!): User!

  """
  Change the status of s user on the current tenant
  """
  updateUserStatus(status: MembershipStatus!, userId: ID!): User!
  useRegistrationCode(id: ID!, price: Json): EventRegistrationCode!

  """
  Send a verification email to a user (to the current user if no id is provided)
  """
  verifyEmail(userId: ID): User!
}

"""
Input to create a new Event Organizer
"""
input NewOrganizerInput {
  link: String
  name: String!
  text: String!
}

type PhotoShare {
  cols: Int!
  container: String!
  createdAt: DateTime!
  creator: User!
  creatorId: String!
  event: TumiEvent!
  eventId: String!
  id: ID!
  original: String!
  originalBlob: String!
  previewBlob: String
  rows: Int!
  src: String!
  type: String!
}

type Product {
  availability: [MembershipStatus!]!
  createdAt: DateTime!
  description: String!
  id: ID!
  images: [ProductImage!]!
  leadImage: ProductImage
  leadImageId: String
  prices: Json!
  publicationState: PublicationState!
  tenant: Tenant!
  tenantId: String!
  title: String!
}

type ProductImage {
  container: String!
  createdAt: DateTime!
  creator: User!
  creatorId: String!
  id: ID!
  original: String!
  originalBlob: String!
  previewBlob: String
  product: Product!
  productId: String!
  src: String!
  type: String!
}

type ProductPurchase {
  createdAt: DateTime!
  id: ID!
  payment: StripePayment
  paymentId: String
  price: Json!
  product: Product!
  productId: String!
  user: User!
  userId: String!
}

enum PublicationState {
  APPROVAL
  DRAFT
  ORGANIZERS
  PUBLIC
}

type Query {
  blobUploadKey: String!
  costItem(id: ID!): CostItem!
  costItemsForEvent(eventId: ID!): [CostItem!]!
  currentTenant: Tenant

  """
  Returns the logged in user if found or null
  """
  currentUser: User

  """
  Get one event by ID
  """
  event(eventId: ID!): TumiEvent!
  eventRegistrationCode(id: ID!): EventRegistrationCode
  eventRegistrationCodes(
    includePrivate: Boolean = false
  ): [EventRegistrationCode!]!

  """
  Get one event template by ID
  """
  eventTemplate(id: ID!): EventTemplate

  """
  Query event templates for the current tenant
  """
  eventTemplates: [EventTemplate!]!

  """
  Get a list of all events
  """
  events(after: DateTime, userId: ID): [TumiEvent!]!
  getPaymentSetupSession: paymentSetupSession!
  logStats: [ActivityLogStat!]!
  logs: [ActivityLog!]!

  """
  Retrieve a list of all event organizers
  """
  organizers: [EventOrganizer!]!
  photoShareKey: String!
  photos: [PhotoShare!]!
  photosOfEvent(id: ID!): [PhotoShare!]!
  product(id: ID!): Product!
  productImageKey: String!
  products: [Product!]!
  registration(id: ID!): EventRegistration!
  registrations(
    statusList: [RegistrationStatus] = [PENDING, SUCCESSFUL]
  ): [EventRegistration!]!
  templateCategories: [EventTemplateCategory!]!
  templateCategory(id: ID!): EventTemplateCategory
  tenants: [Tenant!]!
  userById(
    """
    ID of the user
    """
    id: ID!
  ): User
  userSearchResultNum(
    roleList: [Role] = [USER, ADMIN]
    search: String
    statusList: [MembershipStatus] = [NONE, TRIAL, FULL, SPONSOR, ALUMNI]
  ): Int!

  """
  Get all users with a status from the allowList
  """
  userWithStatus(allowList: [MembershipStatus!]!): [User!]!

  """
  returns a list of users
  """
  users(
    pageIndex: Int
    pageLength: Int
    roleList: [Role] = [USER, ADMIN]
    search: String
    statusList: [MembershipStatus] = [NONE, TRIAL, FULL, SPONSOR, ALUMNI]
  ): [User!]!
}

type Receipt {
  amount: Decimal!
  blob: String!
  container: String!
  costItem: CostItem!
  costItemId: String!
  createdAt: DateTime!
  id: ID!
  md5: String
  preview: String
  type: String
  url: String!
  user: User!
  userId: String!
}

enum RegistrationMode {
  EXTERNAL
  ONLINE
  STRIPE
}

enum RegistrationStatus {
  CANCELLED
  PENDING
  SUCCESSFUL
}

enum RegistrationType {
  CALENDAR
  ORGANIZER
  PARTICIPANT
}

enum Role {
  ADMIN
  USER
}

type StripePayment {
  amount: Decimal!
  checkoutSession: String!
  createdAt: DateTime!
  eventRegistration: EventRegistration

  """
  Array of events with their timestamps
  """
  events: [Json]!
  feeAmount: Decimal
  id: ID!
  netAmount: Decimal
  paymentIntent: String!
  paymentMethod: String
  paymentMethodType: String
  productPurchase: ProductPurchase
  purchaseId: String
  refundedAmount: Decimal
  status: String!
}

type StripeUserData {
  customerId: String!
  id: ID!
  paymentMethodId: String
}

enum SubmissionItemType {
  BOOLEAN
  DATE
  FILE
  LONGTEXT
  NUMBER
  RATING
  TEXT
}

enum SubmissionTime {
  AFTER
  BEFORE
  DURING
  REGISTRATION
}

"""
One Tenant of the app, most likely an ESN section
"""
type Tenant {
  aboutPage: String!
  createdAt: DateTime!
  faqPage: String
  id: ID!
  imprintPage: String!
  name: String!
  privacyPolicyPage: String!
  shortName: String!
  statistics: statistics!
}

"""
Actual instande of an TumiEventbased on a template
"""
type TumiEvent {
  activeRegistration: EventRegistration
  amountCollected: Decimal!
  coordinates: Json
  costItems(hideOnInvoice: Boolean = false): [CostItem!]!

  """
  Indicates whether the user could be an organizer for this event
  """
  couldBeOrganizer: Boolean!

  """
  Indicates whether the user could be a participant for this event
  """
  couldBeParticipant: Boolean!
  createdAt: DateTime!
  createdBy: User!
  creatorId: String!
  description: String!
  end: DateTime!
  eventOrganizerId: String!
  eventRegistrationCodes: [EventRegistrationCode!]!
  eventTemplate: EventTemplate!
  eventTemplateId: String!
  feesPaid: Decimal!
  freeParticipantSpots: String!
  icon: String!
  id: ID!
  location: String!
  netAmountCollected: Decimal!
  organizer: EventOrganizer!
  organizerLimit: Int!

  """
  Indicates whether the current user can register to this event as Organizer
  """
  organizerRegistrationPossible: Boolean!
  organizerRegistrations: [EventRegistration!]!
  organizerSignup: [MembershipStatus!]!
  organizerText: String!

  """
  Organizers already on this event
  """
  organizers: [User!]!

  """
  Number of users registered as organizer to this event
  """
  organizersRegistered: Int!
  ownRegistrations(includeCancelled: Boolean = false): [EventRegistration!]!
  participantLimit: Int!

  """
  Indicates whether the current user can register to this event as participant
  """
  participantRegistrationPossible: Json!
  participantRegistrations(
    includeCancelled: Boolean = false
  ): [EventRegistration!]!
  participantSignup: [MembershipStatus!]!
  participantText: String!

  """
  Number of users that are checked in on the event
  """
  participantsAttended: Int!

  """
  Number of users registered as participant to this event
  """
  participantsRegistered: Int!
  photoShares: [PhotoShare!]!
  plannedSpend: Decimal
  prices: Json
  publicationState: PublicationState!
  registrationLink: String
  registrationMode: RegistrationMode!
  registrationStart: DateTime!
  start: DateTime!
  submissionItems(submissionTime: SubmissionTime): [EventSubmissionItem!]!
  submittedSpend: Decimal
  title: String!
  userIsCreator: Boolean!

  """
  Indicates if the current user is organizer for the event
  """
  userIsOrganizer: Boolean!

  """
  Indicates if the current user is registered for the event
  """
  userRegistered: Boolean!
}

"""
Additional inputs to create an event from a template
"""
input UpdateCoreEventInput {
  end: DateTime!
  eventOrganizerId: ID
  icon: String!
  organizerLimit: Int!
  organizerSignup: [MembershipStatus!]!
  participantLimit: Int!
  participantSignup: [MembershipStatus!]!
  prices: Json
  registrationLink: String
  registrationMode: RegistrationMode!
  registrationStart: DateTime!
  start: DateTime!
  title: String!
}

"""
Additional inputs to create an event from a template
"""
input UpdateGeneralEventInput {
  description: String!
  organizerText: String!
  participantText: String!
}

"""
Input to update an event location
"""
input UpdateLocationInput {
  coordinates: Json
  location: String!
}

input UpdateProductInput {
  availability: [MembershipStatus!]!
  description: String!
  prices: Json!
  publicationState: PublicationState!
  title: String!
}

"""
Profile update input object
"""
input UpdateProfileInput {
  firstName: String!
  lastName: String!
  phone: String
}

"""
Input to update an event template
"""
input UpdateTemplateInput {
  comment: String!
  description: String!
  duration: Decimal!
  icon: String!
  organizerText: String!
  participantText: String!
  title: String!
}

"""
One User of the app
"""
type User {
  """
  Id from auth0 for this user
  """
  authId: String!
  birthdate: DateTime!
  calendarToken: String!
  createdAt: DateTime!
  currentTenant(userId: ID): UsersOfTenants
  email: String!
  email_verified: Boolean!
  esnCardOverride: Boolean!
  eventRegistrations: [EventRegistration!]!
  firstName: String!

  """
  Concatenated name of the user
  """
  fullName: String!
  hasESNcard: Boolean!
  iban: String
  id: ID!
  lastName: String!

  """
  List of events organized by the user
  """
  organizedEvents: [TumiEvent!]!

  """
  List of events attended by the user
  """
  participatedEvents(hideCancelled: Boolean = false): [TumiEvent!]!
  paypal: String
  phone: String
  picture: String!
}

type UsersOfTenants {
  createdAt: DateTime!
  role: Role!
  status: MembershipStatus!
  stripeData: StripeUserData
  tenant: Tenant!
  tenantId: String!
  user: User!
  userId: String!
}

type checkoutSession {
  client_secret: String
  id: String!
  status: String!
}

type lineChartSeriesItem {
  name: String!
  value: Int!
}

type paymentIntent {
  client_secret: String
  id: String!
  status: String!
}

type paymentSetupSession {
  id: String!
}

type statistics {
  averageEventCost: Float!
  checkins: Int!
  paidEvents: Int!
  paidRegistrations: Int!
  refundHistory: [Json!]!
  registrationHistory: [Json!]!
  registrations: Int!
  totalEvents: Int!
  totalNetPayments: Float!
  userEventDistribution: [Json!]!
  userHistory: [Json!]!
  usersRegistered: Int!
  usersRegisteredEvents: Int!
  usersRegisteredFreeEvents: Int!
  usersRegisteredPaidEvents: Int!
  usersWithCustomer: Int!
  usersWithPaymentMethod: Int!
}

input updateTenantInput {
  aboutPage: String!
  faqPage: String
  imprintPage: String!
  privacyPolicyPage: String!
}

type userHistoryItem {
  name: String!
  series: [lineChartSeriesItem!]!
}
